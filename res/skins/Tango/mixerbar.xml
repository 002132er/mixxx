<!--
Description:
	The mixerbar, containing collapsible sections for
	* Master
	* Headphones (if enabled)
	* Microphones (if enabled)
	* Auxiliary (if enabled)
	Mixerbar is alsways at bottom edge of screen.
	It is centered if Library is hidden.
	With Library visible, it can either show up below tracks table to save
	space for treeview on the left, or full-width below Libary if many
	Mics/AUX are enabled.
-->
<Template>
  <WidgetGroup><!-- Mixer Bar -->
    <ObjectName>Mixerbar</ObjectName>
    <Layout>horizontal</Layout>
    <Size>-1min,32f</Size>
    <Children>
      <!--WidgetGroup><SizePolicy>me,min</SizePolicy></WidgetGroup-->

      <WidgetGroup><!-- Master Mixer -->
        <ObjectName>MixerbarSection</ObjectName>
        <Layout>horizontal</Layout>
        <Size>-1min,32f</Size>
        <Children>

          <WidgetGroup>
            <ObjectName>Mixerbar_MasterSectionLabel</ObjectName>
            <Size>24f,28f</Size>
          </WidgetGroup>

          <WidgetGroup>
            <ObjectName>VUMeterMixerbar</ObjectName>
            <SizePolicy>max,max</SizePolicy>
            <Layout>stacked</Layout>
            <Children>
              <StatusLight>
                <PathStatusLight>skin:/graphics/mixerbar_vumeter_clipping_over.png</PathStatusLight>
                <PathBack>skin:/graphics/mixerbar_vumeter_clipping.png</PathBack>
                <Connection>
                  <ConfigKey>[Master],PeakIndicator</ConfigKey>
                </Connection>
              </StatusLight>
              <VuMeter>
                <PathVu>skin:/graphics/mixerbar_vumeter_over.png</PathVu>
                <PathBack>skin:/graphics/mixerbar_vumeter.png</PathBack>
                <Horizontal>false</Horizontal>
                <PeakHoldSize>5</PeakHoldSize>
                <PeakHoldTime>500</PeakHoldTime>
                <PeakFallTime>50</PeakFallTime>
                <PeakFallStep>2</PeakFallStep>
                <Connection>
                  <ConfigKey>[Master],VuMeter</ConfigKey>
                </Connection>
              </VuMeter>
            </Children>
          </WidgetGroup>

          <WidgetGroup><Size>1f,1min</Size></WidgetGroup>

          <Template src="skin:knob_textless.xml">
            <SetVariable name="TooltipId">master_gain</SetVariable>
            <SetVariable name="ObjectName">MixerbarKnob</SetVariable>
            <SetVariable name="Size">28f,28f</SetVariable>
            <SetVariable name="group">[Master]</SetVariable>
            <SetVariable name="ConfigKey">gain</SetVariable>
            <SetVariable name="Color">yellow</SetVariable>
          </Template>

          <WidgetGroup><Size>2f,1min</Size></WidgetGroup>

          <SliderComposed>
            <TooltipId>balance</TooltipId>
            <ObjectName>MixerbarSlider</ObjectName>
            <SizePolicy>min,min</SizePolicy>
            <Handle>skin:/knobs_sliders/slider_balance_handle.svg</Handle>
            <Slider>skin:/knobs_sliders/slider_balance_scale.svg</Slider>
            <Horizontal>true</Horizontal>
            <Connection>
              <ConfigKey>[Master],balance</ConfigKey>
            </Connection>
          </SliderComposed>

        </Children>
      </WidgetGroup>

      <WidgetGroup><!-- Booth Gain -->
        <Layout>horizontal</Layout>
        <Size>-1min,32f</Size>
        <Children>
          <WidgetGroup>
            <ObjectName>MixerbarSection</ObjectName>
            <Layout>horizontal</Layout>
            <Size>-1min,32f</Size>
            <Children>

              <WidgetGroup>
                <ObjectName>Mixerbar_BoothSectionLabel</ObjectName>
                <Size>32f,28f</Size>
              </WidgetGroup>

              <Template src="skin:knob_textless.xml">
                <SetVariable name="TooltipId">booth_gain</SetVariable>
                <SetVariable name="ObjectName">MixerbarKnob</SetVariable>
                <SetVariable name="Size">28f,28f</SetVariable>
                <SetVariable name="group">[Master]</SetVariable>
                <SetVariable name="ConfigKey">booth_gain</SetVariable>
                <SetVariable name="Color">yellow</SetVariable>
              </Template>

              <WidgetGroup><Size>1f,1min</Size></WidgetGroup>

            </Children>
          </WidgetGroup>
        </Children>
        <Connection>
          <ConfigKey>[Master],booth_enabled</ConfigKey>
          <BindProperty>visible</BindProperty>
        </Connection>
      </WidgetGroup><!-- /Booth Gain -->

      <WidgetGroup><!-- Headphone Mixer -->
        <ObjectName>MixerbarSection</ObjectName>
        <Layout>horizontal</Layout>
        <Size>-1min,32f</Size>
        <Children>

          <WidgetGroup>
            <ObjectName>Mixerbar_HeadSectionLabel</ObjectName>
            <Size>32f,28f</Size>
          </WidgetGroup>

          <WidgetGroup><Size>1f,1min</Size></WidgetGroup>

          <Template src="skin:button_2state_persist.xml"><!-- Toggle extra deck buttons -->
            <SetVariable name="ObjectName">MixerbarToggler</SetVariable>
            <SetVariable name="Size">11f,32f</SetVariable>
            <SetVariable name="ConfigKey">[Tango],mixerbar_headphone</SetVariable>
          </Template>

          <WidgetGroup><!-- Headphone expanded -->
            <SizePolicy>max,me</SizePolicy>
            <Layout>stacked</Layout>
            <Children>

              <!-- index 0 due to bug -->
              <WidgetGroup><Size>0f,0f</Size></WidgetGroup>

              <!-- Headphone controls greyed out if no headphone device configured -->
              <WidgetGroup>
                <ObjectName>MixerbarCover</ObjectName>
                <Layout>vertical</Layout>
                <SizePolicy>min,me</SizePolicy>
                <Connection>
                  <ConfigKey>[Master],headEnabled</ConfigKey>
                  <BindProperty>visible</BindProperty>
                  <Transform><Not/></Transform>
                </Connection>
              </WidgetGroup>

              <!-- actual headphone controls -->
              <WidgetGroup>
                <SizePolicy>min,me</SizePolicy>
                <Layout>horizontal</Layout>
                <Children>
                  <Template src="skin:knob_textless.xml">
                    <SetVariable name="TooltipId">headphone_gain</SetVariable>
                    <SetVariable name="ObjectName">MixerbarKnob</SetVariable>
                    <SetVariable name="Size">28f,28f</SetVariable>
                    <SetVariable name="group">[Master]</SetVariable>
                    <SetVariable name="ConfigKey">headGain</SetVariable>
                    <SetVariable name="Color">yellow</SetVariable>
                  </Template>

                  <WidgetGroup><Size>2f,1min</Size></WidgetGroup>

                  <SliderComposed>
                    <TooltipId>headMix</TooltipId>
                    <ObjectName>MixerbarSlider</ObjectName>
                    <SizePolicy>min,min</SizePolicy>
                    <Handle>skin:/knobs_sliders/slider_headMix_handle.svg</Handle>
                    <Slider>skin:/knobs_sliders/slider_headMix_scale.svg</Slider>
                    <Horizontal>true</Horizontal>
                    <Connection>
                      <ConfigKey>[Master],headMix</ConfigKey>
                    </Connection>
                  </SliderComposed>

                  <WidgetGroup><Size>1f,1min</Size></WidgetGroup>

                  <WidgetGroup>
                    <SizePolicy>min,min</SizePolicy>
                    <Layout>vertical</Layout>
                    <Children>
                      <WidgetGroup><Size>1min,4f</Size></WidgetGroup>
                      <Template src="skin:button_2state.xml">
                        <SetVariable name="TooltipId">headSplit</SetVariable>
                        <SetVariable name="ObjectName">MixerbarButton</SetVariable>
                        <SetVariable name="Size">38f,24f</SetVariable>
                        <SetVariable name="state_0_unpressed">headSplit_off.svg</SetVariable>
                        <SetVariable name="state_0_pressed">headSplit_off.svg</SetVariable>
                        <SetVariable name="state_1_unpressed">headSplit_on.svg</SetVariable>
                        <SetVariable name="state_1_pressed">headSplit_on.svg</SetVariable>
                        <SetVariable name="ConfigKey">[Master],headSplit</SetVariable>
                      </Template>
                    </Children>
                  </WidgetGroup>

                  <WidgetGroup><Size>2f,1min</Size></WidgetGroup>
                </Children>
              </WidgetGroup><!-- /actual headphone controls -->
            </Children>
            <Connection>
              <ConfigKey persist="true">[Tango],mixerbar_headphone</ConfigKey>
              <BindProperty>visible</BindProperty>
            </Connection>
          </WidgetGroup><!-- /Headphone expanded -->
        </Children>
      </WidgetGroup><!-- /Headphone Mixer -->

    </Children>
  </WidgetGroup>
</Template>
