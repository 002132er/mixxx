<!DOCTYPE template>
<!--
  Description:
    Deck text row
  Variables:
    group: the group to connect to
-->
<Template>
  <WidgetGroup>
    <ObjectName>DeckTextRow</ObjectName>
    <Layout>horizontal</Layout>
    <SizePolicy>me,max</SizePolicy>
    <Children>
      <WidgetGroup>
        <Layout>horizontal</Layout>
        <SizePolicy>min,min</SizePolicy>
        <Children>
          <CoverArt>
            <TooltipId>coverart</TooltipId>
            <ObjectName>DeckCoverArt</ObjectName>
            <SizePolicy>min,min</SizePolicy>
            <MinimumSize>58,58</MinimumSize>
            <Group><Variable name="group"/></Group>
          </CoverArt>
        </Children>
        <Connection>
          <ConfigKey persist="true">[Deere],show_coverart</ConfigKey>
          <BindProperty>visible</BindProperty>
          <!-- Needed for the show/hide logic to work when circling through
               the cover art display options: none/vinyl cover/text row -->
          <Transform>
            <Add>-1</Add>
          </Transform>
        </Connection>
      </WidgetGroup>

      <WidgetGroup>
        <ObjectName>DeckTextColumn</ObjectName>
        <Layout>vertical</Layout>
        <Children>
          <WidgetGroup>
            <ObjectName>UpperTextRow</ObjectName>
            <Layout>horizontal</Layout>
            <!-- When TextRow is laid out, we need to ignore our children. Otherwise
                 decks might end up with different widths based on the size of the
                 labels in this row -->
            <SizePolicy>i,max</SizePolicy>
            <Children>
              <WidgetGroup>
                <ObjectName>TitleGutter</ObjectName>
                <Layout>horizontal</Layout>
                <SizePolicy>min,max</SizePolicy>
                <Children>
                  <TrackProperty>
                    <TooltipId>track_title</TooltipId>
                    <SizePolicy>me,min</SizePolicy>
                    <Property>title</Property>
                    <Group><Variable name="group"/></Group>
                    <Elide>right</Elide>
                  </TrackProperty>

                  <WidgetGroup>
                    <ObjectName>BPMGutter</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,max</SizePolicy>
                    <Children>
                      <!-- Fake a click-able multi-state widget by stacking a
                           transparent PushButton dummy (the trigger) on top of the
                           individual WidgetGroups (the content). PushButton tracks
                           the size of the active WidgetGroup and resizes. Notice
                           that the trigger has the same TooltipId as the content.
                           Description: Key edit widget -->
                      <WidgetStack>
                        <ObjectName>KeyEditRow</ObjectName>
                        <SizePolicy>max,</SizePolicy>
                        <Style>
                        </Style>
                        <NextControl>[Deere],key_layout_next</NextControl>
                        <PrevControl>[Deere],key_layout_prev</PrevControl>
                        <Children>
                          <WidgetGroup>
                            <Layout>stacked</Layout>
                            <Children>
                              <PushButton>
                                <ObjectName>KeyEditTrigger</ObjectName>
                                <TooltipId>visual_key</TooltipId>
                                <NumberStates>1</NumberStates>
                                <State>
                                  <Number>0</Number>
                                  <!-- <Text>&#9998;</Text>
                                  <Alignment>right</Alignment> -->
                                  <Pressed scalemode="STRETCH"></Pressed>
                                  <Unpressed scalemode="STRETCH"></Unpressed>
                                </State>
                                <Connection>
                                  <ConfigKey>[Deere],key_layout_next</ConfigKey>
                                </Connection>
                              </PushButton>
                              <Key>
                                <ObjectName>KeyEditTriggerLabel</ObjectName>
                                <Group><Variable name="group"/></Group>
                                <SizePolicy>min,</SizePolicy>
                                <DisplayCents>false</DisplayCents>
                                <Connection>
                                  <ConfigKey><Variable name="group"/>,visual_key</ConfigKey>
                                </Connection>
                              </Key>
                            </Children>
                          </WidgetGroup>

                          <WidgetGroup>
                            <ObjectName>KeyEditRowExpanded</ObjectName>
                            <Layout>horizontal</Layout>
                            <Children>
                              <WidgetGroup>
                                <!-- The key edit controls are aligned to the right because the key
                                     widget widths can rapidly change, especially with traditional
                                     notation selected in the preferences. The controls stay calm
                                     this way. -->
                                <Layout>stacked</Layout>
                                <Children>
                                  <PushButton>
                                    <ObjectName>KeyEditTrigger</ObjectName>
                                    <TooltipId>visual_key</TooltipId>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <!-- <Text>&#9998;</Text>
                                      <Alignment>right</Alignment> -->
                                      <Pressed scalemode="STRETCH"></Pressed>
                                      <Unpressed scalemode="STRETCH"></Unpressed>
                                    </State>
                                    <Connection>
                                      <ConfigKey>[Deere],key_layout_next</ConfigKey>
                                    </Connection>
                                  </PushButton>

                                  <Key>
                                    <ObjectName>KeyEditTriggerLabel</ObjectName>
                                    <Group><Variable name="group"/></Group>
                                    <SizePolicy>min,</SizePolicy>
                                    <DisplayCents>true</DisplayCents>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,visual_key</ConfigKey>
                                    </Connection>
                                  </Key>
                                </Children>
                              </WidgetGroup>

                              <WidgetGroup>
                                <ObjectName>KeyEditRowControls</ObjectName>
                                <Layout>horizontal</Layout>
                                <SizePolicy>p,me</SizePolicy>
                                <MinimumSize>60,20</MinimumSize>
                                <MaximumSize>120,30</MaximumSize>
                                <Children>
                                  <PushButton>
                                    <TooltipId>pitch_up</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>+</Text>
                                    </State>
                                    <State>
                                      <Number>0</Number>
                                      <Text>+</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,pitch_up</ConfigKey>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,pitch_up_small</ConfigKey>
                                      <ButtonState>RightButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>pitch_down</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>-</Text>
                                    </State>
                                    <State>
                                      <Number>1</Number>
                                      <Text>-</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,pitch_down</ConfigKey>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,pitch_down_small</ConfigKey>
                                      <ButtonState>RightButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>sync_reset_key</TooltipId>
                                    <MinimumSize>40,20</MinimumSize>
                                    <MaximumSize>60,30</MaximumSize>
                                    <NumberStates>2</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>MATCH</Text>
                                    </State>
                                    <State>
                                      <Number>1</Number>
                                      <Text>MATCH</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,sync_key</ConfigKey>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                    <Connection>
                                        <ConfigKey><Variable name="group"/>,reset_key</ConfigKey>
                                        <ButtonState>RightButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                </Children>
                              </WidgetGroup>
                            </Children>
                          </WidgetGroup>
                        </Children>
                      </WidgetStack>

                      <!-- Fake a click-able multi-state widget by stacking a
                           transparent PushButton dummy (the trigger) on top of the
                           individual WidgetGroups (the content). PushButton tracks
                           the size of the active WidgetGroup and resizes. Notice
                           that the trigger has the same TooltipId as the content.
                           Description: BPM/Beatgrid edit widget -->
                      <WidgetStack>
                        <ObjectName>BpmEditRow</ObjectName>
                        <SizePolicy>max,</SizePolicy>
                        <Style>
                        </Style>
                        <NextControl>[Deere],bpm_layout_next</NextControl>
                        <PrevControl>[Deere],bpm_layout_prev</PrevControl>
                        <Children>
                          <WidgetGroup>
                            <Layout>stacked</Layout>
                            <Children>
                              <PushButton>
                                <ObjectName>BpmEditTrigger</ObjectName>
                                <TooltipId>visual_bpm</TooltipId>
                                <NumberStates>1</NumberStates>
                                <State>
                                  <Number>0</Number>
                                  <!-- <Text>&#9998;</Text>
                                  <Alignment>right</Alignment> -->
                                  <Pressed scalemode="STRETCH"></Pressed>
                                  <Unpressed scalemode="STRETCH"></Unpressed>
                                </State>
                                <Connection>
                                  <ConfigKey>[Deere],bpm_layout_next</ConfigKey>
                                </Connection>
                              </PushButton>
                              <NumberBpm>
                                <ObjectName>BpmEditTriggerLabel</ObjectName>
                                <Group><Variable name="group"/></Group>
                                <Alignment>right</Alignment>
                                <Connection>
                                  <ConfigKey><Variable name="group"/>,visual_bpm</ConfigKey>
                                </Connection>
                              </NumberBpm>
                            </Children>
                          </WidgetGroup>

                          <WidgetGroup>
                            <ObjectName>BpmEditRowExpanded</ObjectName>
                            <Layout>horizontal</Layout>
                            <Children>
                              <WidgetGroup>
                                <Layout>stacked</Layout>
                                <Children>
                                  <PushButton>
                                    <ObjectName>BpmEditTrigger</ObjectName>
                                    <TooltipId>visual_bpm</TooltipId>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <!-- <Text>&#9998;</Text>
                                      <Alignment>right</Alignment> -->
                                      <Pressed scalemode="STRETCH"></Pressed>
                                      <Unpressed scalemode="STRETCH"></Unpressed>
                                    </State>
                                    <Connection>
                                      <ConfigKey>[Deere],bpm_layout_next</ConfigKey>
                                    </Connection>
                                  </PushButton>

                                  <NumberBpm>
                                    <ObjectName>BpmEditTriggerLabel</ObjectName>
                                    <Group><Variable name="group"/></Group>
                                    <Alignment>right</Alignment>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,visual_bpm</ConfigKey>
                                    </Connection>
                                  </NumberBpm>
                                </Children>
                              </WidgetGroup>

                              <WidgetGroup>
                                <ObjectName>BpmEditRowControls</ObjectName>
                                <Layout>horizontal</Layout>
                                <SizePolicy>p,me</SizePolicy>
                                <MinimumSize>100,20</MinimumSize>
                                <MaximumSize>180,30</MaximumSize>
                                <Children>
                                  <PushButton>
                                    <TooltipId>beats_translate_curpos</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>||||</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_translate_curpos</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>beats_translate_alignment</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>| = |</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_translate_match_alignment</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>beats_adjust_faster</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>|&#9664;|</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_adjust_faster</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>beats_adjust_slower</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>|&#9654;|</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_adjust_slower</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>beats_translate_earlier</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>&#9664;|</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_translate_earlier</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>beats_translate_later</TooltipId>
                                    <MinimumSize>20,20</MinimumSize>
                                    <MaximumSize>30,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>|&#9654;</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,beats_translate_later</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>

                                  <PushButton>
                                    <TooltipId>bpm_tap</TooltipId>
                                    <MinimumSize>40,20</MinimumSize>
                                    <MaximumSize>60,30</MaximumSize>
                                    <NumberStates>1</NumberStates>
                                    <State>
                                      <Number>0</Number>
                                      <Text>TAP</Text>
                                    </State>
                                    <Connection>
                                      <ConfigKey><Variable name="group"/>,bpm_tap</ConfigKey>
                                      <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
                                      <ButtonState>LeftButton</ButtonState>
                                    </Connection>
                                  </PushButton>
                                </Children>
                              </WidgetGroup>

                            </Children>
                          </WidgetGroup>
                        </Children>
                      </WidgetStack>
                    </Children>
                  </WidgetGroup>
                </Children>
              </WidgetGroup>
            </Children>
          </WidgetGroup>

          <WidgetGroup>
            <ObjectName>LowerTextRow</ObjectName>
            <Layout>horizontal</Layout>
            <!-- When TextRow is laid out, we need to ignore our children. Otherwise
                 decks might end up with different widths based on the size of the
                 labels in this row -->
            <SizePolicy>i,max</SizePolicy>
            <Children>
              <WidgetGroup>
                <ObjectName>ArtistGutter</ObjectName>
                <Layout>horizontal</Layout>
                <SizePolicy>me,max</SizePolicy>
                <Children>
                  <TrackProperty>
                    <TooltipId>track_artist</TooltipId>
                    <Property>artist</Property>
                    <SizePolicy>me,min</SizePolicy>
                    <Elide>right</Elide>
                    <Group><Variable name="group"/></Group>
                  </TrackProperty>

                  <WidgetGroup>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,min</SizePolicy>
                    <Children>
                      <StarRating>
                        <TooltipId>starrating</TooltipId>
                        <Group><Variable name="group"/></Group>
                      </StarRating>
                    </Children>
                    <Connection>
                      <ConfigKey persist="true">[Deere],show_starrating</ConfigKey>
                      <BindProperty>visible</BindProperty>
                    </Connection>
                  </WidgetGroup>

                  <WidgetGroup>
                    <ObjectName>PositionGutter</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>min,max</SizePolicy>
                    <Children>
                      <NumberPos>
                        <TooltipId>track_time</TooltipId>
                        <Group><Variable name="group"/></Group>
                      </NumberPos>
                    </Children>
                  </WidgetGroup>
                </Children>
              </WidgetGroup>
            </Children>
          </WidgetGroup>
        </Children>
      </WidgetGroup>
    </Children>
  </WidgetGroup>
</Template>
