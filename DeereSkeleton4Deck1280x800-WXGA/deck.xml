<!DOCTYPE template>
<!--
  Description:
    Deck widget.
  Variables:
    i: The deck number (1-indexed)
-->
<Template>
  <SetVariable name="group">[Channel<Variable name="i"/>]</SetVariable>
  <SetVariable name="control_show_spinny">[Spinny<Variable name="i"/>]</SetVariable>
  <WidgetGroup>
    <ObjectName>Deck<Variable name="i"/></ObjectName>
    <Layout>horizontal</Layout>
    <SizePolicy>me,min</SizePolicy>
    <Children>
      <WidgetGroup>
        <ObjectName>DeckRows</ObjectName>
        <Layout>vertical</Layout>
        <SizePolicy>me,min</SizePolicy>
        <Children>

          <WidgetGroup>
            <ObjectName>VisualRow</ObjectName>
            <Layout>horizontal</Layout>
            <SizePolicy>me,max</SizePolicy>
            <!-- Because the spinny hides itself and throws off the size
                 calculation we set our minimum size to the spinny size. -->
            <MinimumSize>-1,118</MinimumSize>
            <Children>
              <Visual>
                <Group><Variable name="group"/></Group>
                <BgColor>#1C1C1C</BgColor>
                <SignalHighColor></SignalHighColor>
		<SignalMidColor></SignalMidColor>
		<SignalLowColor></SignalLowColor>
		<SignalColor>#0099FF</SignalColor>
		<BeatColor>#ffffff</BeatColor>
		<PlayPosColor>#00FF00</PlayPosColor>
		<EndOfTrackColor>#EA0000</EndOfTrackColor>
		<AxesColor></AxesColor>
		<Align></Align>
		<DefaultMark>
		  <Align>top</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#000000</TextColor>
		  <Text> %1 </Text>
		</DefaultMark>
		<MarkRange>
		  <StartControl>loop_start_position</StartControl>
		  <EndControl>loop_end_position</EndControl>
		  <EnabledControl>loop_enabled</EnabledControl>
		  <Color>#00FF00</Color>
		  <DisabledColor>#FFFFFF</DisabledColor>
		</MarkRange>
		<Mark>
		  <Control>loop_start_position</Control>
		  <Pixmap>marker_loop_in1.png</Pixmap>
		  <Text>IN</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<Mark>
		  <Control>loop_end_position</Control>
		  <Pixmap>marker_loop_out1.png</Pixmap>
		  <Text>OUT</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<!--
		    The hotcues not represented by a button in the current skin show only in the waveform under two circumstances:
		    - if a MIDI device which supports more hotcues than buttons are in the current skin has them activated
		    - if you change from a skin which supports more hotcues than buttons are in the current skin (and has them activated)
		-->
		<Mark>
		  <Control>hotcue_1_position</Control>
		  <Pixmap>marker_hotcue1_1.png</Pixmap>
		  <Text>1</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<Mark>
		  <Control>hotcue_2_position</Control>
		  <Pixmap>marker_hotcue1_2.png</Pixmap>
		  <Text>2</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<Mark>
		  <Control>hotcue_3_position</Control>
		  <Pixmap>marker_hotcue1_3.png</Pixmap>
		  <Text>3</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<Mark>
		  <Control>hotcue_4_position</Control>
		  <Pixmap>marker_hotcue1_4.png</Pixmap>
		  <Text>4</Text>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
		<Mark>
		  <Control>cue_point</Control>
		  <Pixmap>marker_cue1.png</Pixmap>
		  <Text>CUE</Text>
		  <Align>bottom</Align>
		  <Color>#FF001C</Color>
		  <TextColor>#FFFFFF</TextColor>
		</Mark>
              </Visual>
              <WidgetGroup>
                <ObjectName>SpinnyHolder</ObjectName>
                <Layout>horizontal</Layout>
                <SizePolicy>max,max</SizePolicy>
                <Children>
                  <Spinny>
                    <Group><Variable name="group"/></Group>
                    <PathBackground>vinyl_spinny1_background.png</PathBackground>
		    <PathForeground>vinyl_spinny1_foreground.png</PathForeground>
		    <PathGhost>vinyl_spinny1_foreground_ghost.png</PathGhost>
                  </Spinny>
                </Children>
                <Connection>
		  <ConfigKey><Variable name="control_show_spinny"/></ConfigKey>
		  <BindProperty>visible</BindProperty>
	        </Connection>
              </WidgetGroup>
            </Children>
          </WidgetGroup>
          <!-- End VisualRow -->

          <WidgetGroup>
            <ObjectName>OverviewRow</ObjectName>
            <Layout>horizontal</Layout>
            <SizePolicy>me,min</SizePolicy>
            <MinimumSize>-1,40</MinimumSize>
            <MaximumSize>-1,60</MaximumSize>
            <Children>
              <Overview>
	        <TooltipId>waveform_overview</TooltipId>
	        <Group><Variable name="group"/></Group>
                <SizePolicy>me,me</SizePolicy>
	        <BgColor></BgColor>
	        <SignalHighColor></SignalHighColor>
	        <SignalMidColor></SignalMidColor>
	        <SignalLowColor></SignalLowColor>
	        <SignalColor>#3087BF</SignalColor>
	        <PlayPosColor>#00FF00</PlayPosColor>
	        <DefaultMark>
		  <Align>bottom</Align>
		  <Color>#00FF00</Color>
		  <TextColor>#FFFFFF</TextColor>
		  <Text> %1 </Text>
	        </DefaultMark>
	        <Connection>
		  <ConfigKey><Variable name="group"/>,playposition</ConfigKey>
		  <EmitOnDownPress>false</EmitOnDownPress>
	        </Connection>
	      </Overview>

              <WidgetGroup>
                <ObjectName>OptionGrid</ObjectName>
                <Layout>vertical</Layout>
                <SizePolicy>min,me</SizePolicy>
                <MinimumSize>60,40</MinimumSize>
                <MaximumSize>90,60</MaximumSize>
                <Children>
                  <WidgetGroup>
                    <ObjectName>ObjectGridRow1</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>p,me</SizePolicy>
                    <MinimumSize>60,20</MinimumSize>
                    <MaximumSize>90,30</MaximumSize>
                    <Children>

                      <PushButton>
                        <ObjectName>ShowSpinny</ObjectName>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <NumberStates>2</NumberStates>
		        <State>
			  <Number>0</Number>
                          <Text>S</Text>
		        </State>
		        <State>
			  <Number>1</Number>
                          <Text>S</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="control_show_spinny"/></ConfigKey>
			  <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
			  <ButtonState>LeftButton</ButtonState>
		        </Connection>
		      </PushButton>

		      <PushButton>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <NumberStates>2</NumberStates>
		        <State>
			  <Number>0</Number>
                          <Text>R</Text>
		        </State>
		        <State>
			  <Number>1</Number>
                          <Text>R</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="group"/>,repeat</ConfigKey>
		        </Connection>
		      </PushButton>

                      <PushButton>
		        <NumberStates>1</NumberStates>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <State>
			  <Number>0</Number>
                          <Text>E</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="group"/>,eject</ConfigKey>
			  <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
			  <ButtonState>LeftButton</ButtonState>
			  <ConnectValueToWidget>false</ConnectValueToWidget>
		        </Connection>
		      </PushButton>

                    </Children>
                  </WidgetGroup>

                  <WidgetGroup>
                    <ObjectName>ObjectGridRow2</ObjectName>
                    <Layout>horizontal</Layout>
                    <SizePolicy>p,me</SizePolicy>
                    <MinimumSize>60,20</MinimumSize>
                    <MaximumSize>90,30</MaximumSize>
                    <Children>

                      <PushButton>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <NumberStates>1</NumberStates>
		        <State>
			  <Number>0</Number>
                          <Text>T</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="group"/>,beats_translate_curpos</ConfigKey>
			  <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
			  <ButtonState>LeftButton</ButtonState>
		        </Connection>
		      </PushButton>

		      <PushButton>
		        <NumberStates>2</NumberStates>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <State>
			  <Number>0</Number>
                          <Text>Q</Text>
		        </State>
		        <State>
			  <Number>1</Number>
                          <Text>Q</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="group"/>,quantize</ConfigKey>
			  <EmitOnPressAndRelease>true</EmitOnPressAndRelease>
			  <ButtonState>LeftButton</ButtonState>
		        </Connection>
		      </PushButton>

		      <PushButton>
		        <NumberStates>2</NumberStates>
                        <MinimumSize>20,20</MinimumSize>
                        <MaximumSize>30,30</MaximumSize>
		        <State>
			  <Number>0</Number>
                          <Text>K</Text>
		        </State>
		        <State>
			  <Number>1</Number>
                          <Text>K</Text>
		        </State>
		        <Connection>
			  <ConfigKey><Variable name="group"/>,keylock</ConfigKey>
		        </Connection>
		      </PushButton>

                    </Children>
                  </WidgetGroup>
                </Children>
              </WidgetGroup>

            </Children>
          </WidgetGroup>
          <!-- End OverviewRow -->

          <WidgetGroup>
            <ObjectName>ButtonRow</ObjectName>
            <Layout>horizontal</Layout>
            <SizePolicy>me,min</SizePolicy>
            <Children>

              <Template src="skin:transport.xml"/>

              <Template src="skin:beatloop.xml"/>

              <Template src="skin:loop.xml"/>

              <WidgetGroup>
                <Layout>vertical</Layout>
                <Children>
                  <SliderComposed>
                    <MinimumSize>100,20</MinimumSize>
                    <MaximumSize>200,20</MaximumSize>
                    <Handle>handle-horizontal.svg</Handle>
                    <Horizontal>true</Horizontal>
                    <Connection>
		      <ConfigKey><Variable name="group"/>,volume</ConfigKey>
		      <EmitOnDownPress>false</EmitOnDownPress>
		    </Connection>
                  </SliderComposed>
                  <!--<Template src="skin:vumeter.xml"/>-->
                </Children>
              </WidgetGroup>

              <Template src="skin:knob.xml">
                <SetVariable name="control">pregain</SetVariable>
                <SetVariable name="label">Pregain</SetVariable>
              </Template>

              <Template src="skin:knob.xml">
                <SetVariable name="control">volume</SetVariable>
                <SetVariable name="label">Volume</SetVariable>
              </Template>

              <Template src="skin:knob.xml">
                <SetVariable name="control">pitch</SetVariable>
                <SetVariable name="label">Pitch</SetVariable>
              </Template>

              <Template src="skin:hotcue.xml"/>
            </Children>
          </WidgetGroup>
          <!-- End ButtonRow -->

        </Children>
      </WidgetGroup>
      <!-- End DeckRows -->
    </Children>
  </WidgetGroup>
</Template>
